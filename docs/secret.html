<html>
<head>
	<title>Guest WLAN for Printing</title>
	<style type="text/css">/* %%CSS%% */</style>
	<script type="text/javascript">
var Age = %%AGE%%;
var MaxAge = %%MAXAGE%%;

setTimeout( function() { location.reload(); }, ( MaxAge - Age ) * 1000 );
	</script>
</head>
<body>
<div id="wrapper" class="onscreen">
	<h1>WLAN-Zugang</h1>
	<p id="network" class="tabular">
		<label>Netzwerk</label>
		<span class="value">%%SSID%%</span>
	</p>
	<p id="secret" class="tabular">
		<label>Sicherheitscode</label>
		<span class="value" id="label">%%SECRET%%</span>
	</p>
	<p id="timer" class="tabular">
		<label>GÃ¼ltigkeit</label>
		<span class="value" id="time">-</span>
	</p>
	<div id="progress">
		<div class="bar"><div class="fill"></div></div>
	</div>
</div>
<script type="text/javascript">
	var domSecret = document.querySelector( "#secret > .value" );
	var domTime = document.querySelector( "#time" );
	var domProgress = document.querySelector( "#progress .fill" );

	setInterval( showTime, 1000 );

	showTime();

	function showTime() {
		var seconds = Math.max( 0, MaxAge - Age++ );
		var minutes = Math.floor( seconds / 60 );
		var hours   = Math.floor( minutes / 60 );

		minutes = minutes % 60;
		seconds = seconds % 60;

		domTime.textContent = ( MaxAge > 3600 ? hours + ":" : "" ) + pad( minutes, 2 ) + ":" + pad( seconds, 2 );

		domProgress.style.width = Math.max( 0, Math.min( 100, 100 / MaxAge * Age ) ) + "%";
		if ( MaxAge - Age < 10 ) {
			domProgress.style.backgroundColor = "red";
			domSecret.style.color = "red";
		} else if ( MaxAge - Age < 15 ) {
			domProgress.style.backgroundColor = "orange";
		} else if ( MaxAge - Age < 25 ) {
			domProgress.style.backgroundColor = "rgb(128,192,0)";
		}
	}

	function pad( input, size ) {
		return ( "0" + input ).slice( -size );
	}
</script>
</body>
</html>
